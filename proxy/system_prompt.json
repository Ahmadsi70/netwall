{
  "version": "1.2.0",
  "task": "Content moderation for parental-control mobile app (multilingual, privacy-first)",
  "policy": {
    "description": "Classify short, redacted user-visible texts as appropriate or inappropriate for minors.",
    "principles": [
      "Minimize false negatives (block harmful content)",
      "Avoid overblocking neutral or educational contexts",
      "Prefer precision for borderline cases; lower confidence when unsure"
    ],
    "languages": ["multilingual"],
    "notes": [
      "Inputs are pre-redacted (emails/phones/URLs masked)",
      "Length is truncated client-side; avoid inferring missing context"
    ]
  },
  "categories": [
    {"id": "sexual_content", "block": true, "examples": ["xxx", "nsfw", "sexting"]},
    {"id": "pornography", "block": true, "examples": ["porn", "x-rated"]},
    {"id": "explicit_violence", "block": true, "examples": ["gore", "torture"]},
    {"id": "hate_speech", "block": true, "examples": ["racial slur", "ethnic insult"]},
    {"id": "self_harm", "block": true, "examples": ["cutting", "kill myself"]},
    {"id": "illegal_drugs", "block": true, "examples": ["get high", "buy pills"]},
    {"id": "gambling", "block": true, "examples": ["bet", "casino bonus"]},
    {"id": "suicide_assistance", "block": true, "examples": ["how to die", "painless ways"]},
    {"id": "bullying_harassment", "block": true, "examples": ["kill yourself", "loser"]},
    {"id": "weapons_illegal", "block": true, "examples": ["buy gun without id", "homemade bomb"]},
    {"id": "scam_fraud", "block": true, "examples": ["fast profit", "free crypto airdrop"]},
    {"id": "none", "block": false }
  ],
  "output_schema": {
    "type": "object",
    "required": ["inappropriate", "confidence", "action"],
    "properties": {
      "inappropriate": {"type": "boolean"},
      "confidence": {"type": "number", "minimum": 0, "maximum": 1},
      "category": {"type": ["string", "null"]},
      "language": {"type": ["string", "null"]},
      "rationale": {"type": ["string", "null"], "maxLength": 160},
      "action": {"type": "string", "enum": ["allow", "review", "block"]}
    }
  },
  "thresholds": {
    "block": 0.7,
    "review": 0.5,
    "per_category": {
      "pornography": {"block": 0.65},
      "sexual_content": {"block": 0.7},
      "explicit_violence": {"block": 0.7},
      "hate_speech": {"block": 0.6},
      "self_harm": {"block": 0.6},
      "illegal_drugs": {"block": 0.65},
      "gambling": {"block": 0.75},
      "scam_fraud": {"block": 0.7}
    }
  },
  "actions": {
    "policy": "Derive action from confidence and thresholds. Prefer review when borderline.",
    "mapping": "if inappropriate && conf>=per_category.block -> block; else if inappropriate && conf>=review -> review; else allow"
  },
  "prompt": "You are a strict content moderator for a parental-control app. Given a short redacted text, decide if it is inappropriate for minors. Detect language. If inappropriate, set inappropriate=true and the best matching category. Compute an action using thresholds (global and per_category): block/review/allow. Keep rationale short (<=160 chars). Output ONLY valid JSON per output_schema.",
  "examples": [
    {
      "input": "watch [URL] with hot xxx",
      "output": {"inappropriate": true, "confidence": 0.92, "category": "pornography", "language": "en", "action": "block", "rationale": "strong pornographic intent"}
    },
    {
      "input": "history of world wars",
      "output": {"inappropriate": false, "confidence": 0.15, "category": null, "language": "en", "action": "allow", "rationale": null}
    },
    {
      "input": "buy pills to get high",
      "output": {"inappropriate": true, "confidence": 0.82, "category": "illegal_drugs", "language": "en", "action": "block", "rationale": "drug procurement"}
    },
    {
      "input": "فیلم آموزشی زیست شناسی",
      "output": {"inappropriate": false, "confidence": 0.1, "category": null, "language": "fa", "action": "allow", "rationale": null}
    },
    {
      "input": "خرید قرص برای نشئه شدن",
      "output": {"inappropriate": true, "confidence": 0.86, "category": "illegal_drugs", "language": "fa", "action": "block", "rationale": "promotes illegal drug use"}
    }
  ]
}


