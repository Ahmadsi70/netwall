# 🔐 راهنمای تنظیم کلید API هوش مصنوعی

## 📋 فهرست مطالب

1. [مقدمه](#مقدمه)
2. [چرا کلید API؟](#چرا-کلید-api)
3. [دریافت کلید OpenAI](#دریافت-کلید-openai)
4. [نصب کلید در برنامه](#نصب-کلید-در-برنامه)
5. [امنیت](#امنیت)
6. [سوالات متداول](#سوالات-متداول)

---

## 🎯 مقدمه

InternetGuard Pro از هوش مصنوعی OpenAI برای تشخیص دقیق‌تر محتوای نامناسب استفاده می‌کند. شما دو گزینه دارید:

| گزینه | مزایا | معایب |
|-------|-------|-------|
| **کلید API مستقیم** | ✅ حریم خصوصی بیشتر<br>✅ سرعت بالاتر<br>✅ کنترل کامل | ⚠️ نیاز به ثبت‌نام<br>⚠️ هزینه استفاده |
| **سرور Proxy** | ✅ رایگان<br>✅ بدون نیاز به ثبت‌نام | ⚠️ کندتر<br>⚠️ محدودیت درخواست |

**توصیه ما:** اگر می‌خواهید از حداکثر حریم خصوصی برخوردار شوید، از کلید API مستقیم استفاده کنید.

---

## 🤔 چرا کلید API؟

### مزایای استفاده از کلید مستقیم:

1. **🔒 حریم خصوصی کامل**
   - متن فقط بین شما و OpenAI رد و بدل می‌شود
   - هیچ سرور واسطه‌ای وجود ندارد
   - اطلاعات شما روی دستگاه شما باقی می‌ماند

2. **⚡ سرعت بالاتر**
   - اتصال مستقیم به OpenAI
   - بدون تاخیر سرور واسطه
   - پاسخ سریع‌تر

3. **🎯 دقت بیشتر**
   - استفاده از آخرین مدل‌های OpenAI
   - پردازش پیشرفته‌تر
   - تشخیص دقیق‌تر

4. **💰 کنترل هزینه**
   - شما مالک حساب خود هستید
   - مشاهده دقیق هزینه‌ها
   - محدودیت قابل تنظیم

---

## 🔑 دریافت کلید OpenAI

### مرحله 1: ثبت‌نام در OpenAI

1. به وب‌سایت OpenAI بروید:
   ```
   https://platform.openai.com/signup
   ```

2. با ایمیل خود ثبت‌نام کنید

3. شماره تلفن خود را تایید کنید

4. اطلاعات پرداخت را وارد کنید (اختیاری برای شروع)

### مرحله 2: ایجاد کلید API

1. وارد داشبورد شوید:
   ```
   https://platform.openai.com/api-keys
   ```

2. روی **"Create new secret key"** کلیک کنید

3. یک نام برای کلید انتخاب کنید (مثلاً: "InternetGuard Pro")

4. کلید را کپی کنید (فقط یک بار نمایش داده می‌شود!)
   ```
   sk-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
   ```

5. کلید را در جای امنی ذخیره کنید

### مرحله 3: تنظیم محدودیت‌ها (توصیه شده)

1. در تنظیمات Usage limits:
   ```
   Monthly budget: $5 (یا هر مبلغی که می‌خواهید)
   ```

2. فعال کردن Email notifications برای هشدار هزینه

---

## 📱 نصب کلید در برنامه

### گام به گام:

#### 1️⃣ باز کردن تنظیمات

1. برنامه InternetGuard Pro را باز کنید
2. روی منوی ☰ (گوشه بالا سمت چپ) کلیک کنید
3. گزینه **"Settings"** را انتخاب کنید

#### 2️⃣ ورود به تنظیمات AI

1. در صفحه تنظیمات، به پایین بروید
2. گزینه **"Cloud AI Moderation"** را پیدا کنید
3. روی آن کلیک کنید

#### 3️⃣ وارد کردن کلید API

1. در بخش **"Current Status"** وضعیت فعلی را مشاهده می‌کنید:
   ```
   🔒 API Key: ❌ Not configured
   📡 Active Mode: 🌐 Proxy
   ```

2. در قسمت **"Option 1: Direct OpenAI API"**:
   - کلید API خود را در فیلد وارد کنید
   - کلید به صورت خودکار مخفی می‌شود (••••••)

3. روی دکمه **"Save"** کلیک کنید

#### 4️⃣ تایید نصب

پس از ذخیره، پیام‌های زیر را خواهید دید:
```
✅ API Key saved securely and encrypted
🔄 Restarting AI service with new key...
```

وضعیت به این صورت تغییر می‌کند:
```
🔒 API Key: ✅ Configured securely
📡 Active Mode: 🔐 Direct OpenAI API
```

---

## 🔐 امنیت

### چگونه کلید شما محافظت می‌شود؟

#### 1. رمزگذاری قوی
```
✅ AES-256 GCM Encryption
✅ Android Keystore (Hardware-backed)
✅ شماره IV تصادفی برای هر ذخیره‌سازی
```

#### 2. محافظت در حافظه
```
✅ کلید بلافاصله پس از استفاده پاک می‌شود
✅ هیچ کپی در RAM باقی نمی‌ماند
✅ عدم ذخیره در clipboard
```

#### 3. محافظت از نمایش
```
✅ کلید با ••••••استفاده فقط یک بار قابل مشاهده است
✅ هیچ‌گاه در لاگ‌ها ثبت نمی‌شود
✅ فقط طول کلید در لاگ می‌آید (برای debug)
```

#### 4. محافظت از دسترسی
```
✅ فقط با قفل صفحه دستگاه قابل دسترسی
✅ امکان فعال‌سازی قفل بیومتریک
✅ هیچ همگام‌سازی ابری
```

### چه کسی به کلید شما دسترسی دارد؟

| موجودیت | دسترسی | توضیحات |
|---------|--------|---------|
| **شما** | ✅ کامل | فقط شما می‌توانید کلید را تنظیم/حذف کنید |
| **برنامه** | 🔒 رمزشده | فقط برای ارسال درخواست به OpenAI |
| **OpenAI** | ✅ API | فقط برای پردازش محتوا |
| **سرور Proxy** | ❌ هیچ | در حالت Direct API هیچ proxy نیست |
| **توسعه‌دهنده** | ❌ هیچ | ما هیچ دسترسی به کلید شما نداریم |

---

## ❓ سوالات متداول

### 1. آیا کلید من امن است؟

**✅ بله، کاملاً امن است!**

- رمزگذاری Hardware-backed توسط Android Keystore
- حتی با دسترسی Root هم قابل استخراج نیست
- از استانداردهای امنیتی OWASP پیروی می‌کند

### 2. آیا می‌توانم کلید را ببینم؟

**❌ خیر، بعد از ذخیره نمی‌توانید.**

این یک ویژگی امنیتی است. فقط می‌توانید:
- کلید جدید جایگزین کنید
- کلید فعلی را حذف کنید

### 3. چقدر هزینه دارد؟

OpenAI pricing:
```
Moderation API: $0.002 per 1,000 requests (بسیار ارزان!)
GPT-3.5-turbo: $0.0015 per 1K tokens input
```

مثال: با $1 می‌توانید حدود **50,000 بررسی محتوا** داشته باشید!

### 4. اگر کلید را فراموش کنم چه می‌شود؟

- برنامه به صورت خودکار به حالت Proxy تغییر حالت می‌دهد
- می‌توانید کلید جدید بگیرید و تنظیم کنید
- هیچ داده‌ای از دست نمی‌رود

### 5. آیا کلید روی سرور شما ذخیره می‌شود؟

**❌ مطلقاً نه!**

- کلید فقط روی دستگاه شما ذخیره می‌شود
- ما هیچ سرور مرکزی برای ذخیره کلیدها نداریم
- حریم خصوصی شما 100% محفوظ است

### 6. چطور می‌توانم کلید را حذف کنم؟

1. به Settings > Cloud AI Moderation بروید
2. روی دکمه **"Clear"** کلیک کنید
3. تایید کنید
4. کلید به صورت دائم حذف می‌شود

### 7. آیا می‌توانم از Proxy و API همزمان استفاده کنم؟

**خیر، اولویت این است:**

```
1️⃣ Direct API Key (اگر تنظیم شده باشد)
2️⃣ Proxy Server (اگر API Key نباشد)
3️⃣ Default Proxy (اگر هیچکدام نباشد)
```

### 8. آیا باید اینترنت داشته باشم؟

**برای AI بله، اما:**

- Custom AI محلی همیشه کار می‌کند (آفلاین)
- Cloud AI فقط برای دقت بیشتر است
- می‌توانید Cloud AI را غیرفعال کنید

### 9. چطور بدانم کلید کار می‌کند؟

پس از ذخیره، در قسمت Status:
```
🔒 API Key: ✅ Configured securely
📡 Active Mode: 🔐 Direct OpenAI API
```

همچنین می‌توانید از دکمه **"Test"** استفاده کنید.

### 10. آیا می‌توانم کلید را در چند دستگاه استفاده کنم؟

**✅ بله!**

می‌توانید همان کلید را در چند دستگاه تنظیم کنید. OpenAI محدودیت دستگاه ندارد، فقط محدودیت درخواست دارد.

---

## 🎯 نکات مهم

### ✅ انجام دهید:

- ✅ کلید را در مکان امن نگه دارید
- ✅ محدودیت هزینه تنظیم کنید
- ✅ Email notifications را فعال کنید
- ✅ از قفل صفحه قوی استفاده کنید
- ✅ برنامه را به‌روز نگه دارید

### ❌ انجام ندهید:

- ❌ کلید را در پیام/ایمیل ارسال نکنید
- ❌ اسکرین‌شات از صفحه تنظیمات نگیرید
- ❌ دستگاه را Root نکنید
- ❌ کلید را روی کاغذ ننویسید
- ❌ کلید را با دیگران شریک نکنید

---

## 📊 مقایسه حالت‌ها

| ویژگی | Direct API | Proxy | هیچکدام |
|-------|-----------|-------|---------|
| **حریم خصوصی** | 🟢 عالی | 🟡 متوسط | 🟢 عالی (محلی) |
| **سرعت** | 🟢 سریع | 🟡 متوسط | 🟢 خیلی سریع |
| **دقت** | 🟢 95%+ | 🟢 95%+ | 🟡 85-90% |
| **هزینه** | 🟡 پولی | 🟢 رایگان | 🟢 رایگان |
| **نیاز به اینترنت** | ⚠️ بله | ⚠️ بله | ✅ خیر |
| **پشتیبانی زبان** | 🟢 همه | 🟢 همه | 🟢 FA/EN/AR |

---

## 📞 پشتیبانی

اگر مشکلی دارید:

1. **داخل برنامه**: Settings > Help & Support
2. **ایمیل**: support@internetguardpro.example
3. **تلگرام**: @InternetGuardProSupport
4. **GitHub Issues**: برای مشکلات فنی

---

## 📚 منابع مفید

- [مستندات OpenAI](https://platform.openai.com/docs)
- [راهنمای امنیت API](./API_KEY_SECURITY.md)
- [راهنمای کامل برنامه](./USER_GUIDE.md)
- [سوالات متداول](./FAQ.md)

---

**🎉 تبریک! شما اکنون از بالاترین سطح حریم خصوصی و دقت در فیلترینگ محتوا بهره می‌برید.**

*آخرین به‌روزرسانی: 30 سپتامبر 2025*
*نسخه: 1.0.0* 